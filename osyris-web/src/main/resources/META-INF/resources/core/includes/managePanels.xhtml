<u:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:u="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:r="http://richfaces.org/rich"
	xmlns:d="http://specto.gim.be/display"
	xmlns:j="http://conscientia.org/jsf">
	<a:outputPanel>
		<j:renderPanel id="createPanel"
			rendered="false">
			<d:popupPanel header="#{messages['page.create.title']}"
				icon="#{resources['core/images/actions/16x16/create.png']}"
				show="true" 
				modal="true"
				width="600">
				<d:object mode="EDIT" 
					modelClass="#{form.modelClass}"
					value="#{form.object}">
				</d:object>
				<d:buttons>
					<j:commandButton value="#{messages['page.create.create.button']}"
						image="#{resource['core/images/actions/12x12/apply.png']}"
						type="button"
						action="#{form.save()}"
						render="#{render}">
						<j:renderListener rendered="false" />
					</j:commandButton>
					<j:commandButton value="#{messages['form.general.cancel.button']}"
						type="button"
						image="#{resource['core/images/actions/12x12/cancel.png']}"
						submit="false">
						<j:renderControl event="click" 
							rendered="false" />
					</j:commandButton>
				</d:buttons>
			</d:popupPanel>
		</j:renderPanel>
		
		<j:renderPanel id="uploadPanel"
			rendered="false">
			<d:popupPanel header="#{messages['page.upload.title']}"
				icon="#{resources['core/images/actions/16x16/upload.png']}"
				show="true"
				modal="true"
				width="422">
				<a:region>
					<r:fileUpload id="data"
			           	fileUploadListener="#{form.onFileUpload}"
						maxFilesQuantity="1"
						immediateUpload="true"
						autoclear="true"
						listHeight="auto"
						listWidth="100%"
						execute="@this"
						render="fileData" />
				</a:region>
				<br />
				<a:outputPanel id="fileData">
					<d:object value="#{form.object}"
						mode="VIEW" />
				</a:outputPanel>
				<d:buttons>
					<j:commandButton value="#{messages['page.upload.save.button']}"
						image="#{resource['core/images/actions/12x12/save.png']}"
						type="button"
						action="#{form.save()}"
						render="#{render}">
						<j:renderListener rendered="false" />
					</j:commandButton>
					<j:commandButton value="#{messages['form.general.cancel.button']}"
						type="button"
						image="#{resource['core/images/actions/12x12/cancel.png']}"
						submit="false">
						<j:renderControl event="click" 
							rendered="false" />
					</j:commandButton>
				</d:buttons>
			</d:popupPanel>
		</j:renderPanel>
		
		<j:renderPanel id="viewPanel" 
			rendered="false">
			<d:popupPanel header="#{messages['page.view.title']}"
				icon="#{resources['core/images/actions/16x16/view.png']}"
				show="true" 
				modal="true"
				width="600">
				<d:object mode="VIEW" 
					modelClass="#{form.modelClass}"
					value="#{form.object}">
				</d:object>
				<d:buttons>
					<j:commandButton value="Close"
						image="#{resource['core/images/actions/12x12/close.png']}"
						type="button"
						submit="false">
						<j:renderControl event="click" 
							rendered="false" />
					</j:commandButton>
				</d:buttons>
			</d:popupPanel>
		</j:renderPanel>
		
		<j:renderPanel id="editPanel"
			rendered="false">
			<d:popupPanel header="#{messages['page.edit.title']}"
				icon="#{resources['core/images/actions/16x16/edit.png']}"
				show="true"
				modal="true"
				width="600">
				<d:object mode="EDIT" 
					modelClass="#{form.modelClass}"
					value="#{form.object}">
				</d:object>
				<d:buttons>
					<j:commandButton value="Save"
						image="#{resource['core/images/actions/12x12/save.png']}"
						type="button" 
						action="#{form.save()}"
						render="#{render}">
						<j:renderListener rendered="false" />
					</j:commandButton>
					<j:commandButton value="#{messages['form.general.cancel.button']}"
						type="button"
						image="#{resource['core/images/actions/12x12/cancel.png']}"
						submit="false">
						<j:renderControl event="click" 
							rendered="false" />
					</j:commandButton>
				</d:buttons>
			</d:popupPanel>
		</j:renderPanel>
		
		<j:renderPanel id="deletePanel"
			rendered="false">
			<d:popupPanel header="#{messages['page.delete.title']}"
				icon="#{resources['core/images/actions/16x16/delete.png']}"
				show="true"
				modal="true"
				width="600">
				<h:outputText value="Are you sure you want to delete this object?" />
				<d:object mode="VIEW" 
					modelClass="#{form.modelClass}"
					value="#{form.object}">
				</d:object>
				<d:buttons>
					<j:commandButton value="Delete"
						image="#{resource['core/images/actions/12x12/delete.png']}"
						type="button" 
						action="#{form.delete()}"
						render="#{render}">
						<j:renderListener rendered="false" />
					</j:commandButton>
					<j:commandButton value="#{messages['form.general.cancel.button']}"
						type="button"
						image="#{resource['core/images/actions/12x12/cancel.png']}"
						submit="false">
						<j:renderControl event="click" 
							rendered="false" />
					</j:commandButton>
				</d:buttons>
			</d:popupPanel>
		</j:renderPanel>
	</a:outputPanel>
</u:composition>